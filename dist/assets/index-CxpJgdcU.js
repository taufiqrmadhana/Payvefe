import{Y as xn,Z as Pn,r as te,j as On,_ as _e,$ as K,a0 as A,a1 as rt,a2 as Sn,F as En,B as b,a3 as Tt,a4 as Gn,a5 as zt,a6 as Mt,a7 as In,a8 as An,a9 as Dn,n as P,aa as R,z as D,p as Un,b as $n,k,w as Cn,y as Bn,ab as Ln,ac as kn,ad as mt,ae as Fn,af as jn,ag as Tn,ah as zn,f as ie,m as Mn,ai as Vn,aj as Rn,ak as Hn,al as Nn,am as Wn,an as Jn,ao as at,ap as it,aq as Yn,ar as Kn,as as Zn}from"./index-KOvYx1rk.js";function Xn(e){const{source:t}=e,n=new Map,r=new xn(8192),a=new Map,i=({address:o,chainId:s})=>`${o}.${s}`;return{async consume({address:o,chainId:s,client:f}){const c=i({address:o,chainId:s}),d=this.get({address:o,chainId:s,client:f});this.increment({address:o,chainId:s});const u=await d;return await t.set({address:o,chainId:s},u),r.set(c,u),u},async increment({address:o,chainId:s}){const f=i({address:o,chainId:s}),c=n.get(f)??0;n.set(f,c+1)},async get({address:o,chainId:s,client:f}){const c=i({address:o,chainId:s});let d=a.get(c);return d||(d=(async()=>{try{const _=await t.get({address:o,chainId:s,client:f}),p=r.get(c)??0;return p>0&&_<=p?p+1:(r.delete(c),_)}finally{this.reset({address:o,chainId:s})}})(),a.set(c,d)),(n.get(c)??0)+await d},reset({address:o,chainId:s}){const f=i({address:o,chainId:s});n.delete(f),a.delete(f)}}}const Qn="0x6492649264926492649264926492649264926492649264926492649264926492";function Pe(e){const{address:t,data:n,signature:r,to:a="hex"}=e,i=Pn([te([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Qn]);return a==="hex"?i:On(i)}async function qn(e,t){var f;const{account:n=e.account,chainId:r,nonce:a}=t;if(!n)throw new _e({docsPath:"/docs/eip7702/prepareAuthorization"});const i=K(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:K(t.executor)})(),s={address:t.contractAddress??t.address,chainId:r,nonce:a};return typeof s.chainId>"u"&&(s.chainId=((f=e.chain)==null?void 0:f.id)??await A(e,rt,"getChainId")({})),typeof s.nonce>"u"&&(s.nonce=await A(e,Sn,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&En(o.address,i.address))&&(s.nonce+=1)),s}class er extends b{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function Sa(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:a=({statusCode:m})=>m===200||m>=300,retryCount:i=4,retryDelay:o=({count:m})=>~~(1<<m)*200,timeout:s=6e4,throwOnFailure:f=!1}=t,c=Tt(["waitForCallsStatus",e.uid,n]),{promise:d,resolve:u,reject:_}=Gn();let p;const l=zt(c,{resolve:u,reject:_},m=>{const h=Mt(async()=>{const g=y=>{clearTimeout(p),h(),y(),l()};try{const y=await In(async()=>{const x=await A(e,An,"getCallsStatus")({id:n});if(f&&x.status==="failure")throw new er(x);return x},{retryCount:i,delay:o});if(!a(y))return;g(()=>m.resolve(y))}catch(y){g(()=>m.reject(y))}},{interval:r,emitOnBegin:!0});return h});return p=s?setTimeout(()=>{l(),clearTimeout(p),_(new tr({id:n}))},s):void 0,await d}class tr extends b{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Ea(e){const{r:t,s:n}=Dn.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[a,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:P(t,{size:32}),s:P(n,{size:32}),v:a,yParity:i}:{r:P(t,{size:32}),s:P(n,{size:32}),yParity:i}}const Ga=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],Ia="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";function Vt(e,t={}){const{forHash:n}=t,{authorization:r,factory:a,factoryData:i}=e;return n&&(a==="0x7702"||a==="0x7702000000000000000000000000000000000000")?r?R([r.address,i??"0x"]):"0x7702000000000000000000000000000000000000":a?R([a,i??"0x"]):"0x"}const _t="0x22e325a297439656";function Rt(e,t={}){const{callGasLimit:n,callData:r,maxPriorityFeePerGas:a,maxFeePerGas:i,paymaster:o,paymasterData:s,paymasterPostOpGasLimit:f,paymasterSignature:c,paymasterVerificationGasLimit:d,sender:u,signature:_="0x",verificationGasLimit:p}=e,l=R([D(P(p||0n),{size:16}),D(P(n||0n),{size:16})]),m=Vt(e,t),h=R([D(P(a||0n),{size:16}),D(P(i||0n),{size:16})]),g=e.nonce??0n,y=o?R([o,D(P(d||0n),{size:16}),D(P(f||0n),{size:16}),s||"0x",...c?t.forHash?[_t]:[c,D(P(Un(c)),{size:2}),_t]:[]]):"0x",x=e.preVerificationGas??0n;return{accountGasLimits:l,callData:r,initCode:m,gasFees:h,nonce:g,paymasterAndData:y,preVerificationGas:x,sender:u,signature:_}}const nr={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function rr(e){const{chainId:t,entryPointAddress:n,userOperation:r}=e,a=Rt(r,{forHash:!0});return{types:nr,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function Aa(e){const{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:i,callData:o="0x",callGasLimit:s,maxFeePerGas:f,maxPriorityFeePerGas:c,nonce:d,paymasterAndData:u="0x",preVerificationGas:_,sender:p,verificationGasLimit:l}=a;if(r==="0.8"||r==="0.9")return $n(rr({chainId:t,entryPointAddress:n,userOperation:a}));const m=(()=>{var h,g;if(r==="0.6"){const y=(h=a.initCode)==null?void 0:h.slice(0,42),x=(g=a.initCode)==null?void 0:g.slice(42),E=Vt({authorization:i,factory:y,factoryData:x},{forHash:!0});return te([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[p,d,k(E),k(o),s,l,_,f,c,k(u)])}if(r==="0.7"){const y=Rt(a,{forHash:!0});return te([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[y.sender,y.nonce,k(y.initCode),k(y.callData),y.accountGasLimits,y.preVerificationGas,y.gasFees,k(y.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return k(te([{type:"bytes32"},{type:"address"},{type:"uint256"}],[k(m),n,BigInt(t)]))}async function Da(e){const{extend:t,nonceKeyManager:n=Xn({source:{get(){return Date.now()},set(){}}}),...r}=e;let a=!1;const i=await e.getAddress();return{...t,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(o){const s=(o==null?void 0:o.key)??BigInt(await n.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...o,key:s}):await Bn(e.client,{abi:Ln(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,s]})},async isDeployed(){return a?!0:(a=!!await A(e.client,Cn,"getCode")({address:i}),a)},...e.sign?{async sign(o){const[{factory:s,factoryData:f},c]=await Promise.all([this.getFactoryArgs(),e.sign(o)]);return s&&f?Pe({address:s,data:f,signature:c}):c}}:{},async signMessage(o){const[{factory:s,factoryData:f},c]=await Promise.all([this.getFactoryArgs(),e.signMessage(o)]);return s&&f&&s!=="0x7702"?Pe({address:s,data:f,signature:c}):c},async signTypedData(o){const[{factory:s,factoryData:f},c]=await Promise.all([this.getFactoryArgs(),e.signTypedData(o)]);return s&&f&&s!=="0x7702"?Pe({address:s,data:f,signature:c}):c},type:"smart"}}class Ge extends b{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class H extends b{constructor({cause:t,data:n,message:r}={}){var i;const a=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(H,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(H,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ie extends b{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class Ae extends b{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(Ae,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class De extends b{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(De,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class Ue extends b{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class $e extends b{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty($e,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class Ce extends b{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class Be extends b{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class Le extends b{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class ke extends b{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class Fe extends b{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(Fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class je extends b{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(je,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class se extends b{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(se,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Te extends b{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class V extends b{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(V,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(V,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class ze extends b{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(ze,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Me extends b{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Me,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class oe extends b{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(oe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class fe extends b{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(fe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Ve extends b{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Re extends b{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Re,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class ue extends b{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(ue,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class He extends b{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(He,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class ce extends b{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(ce,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class Ne extends b{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(Ne,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class We extends b{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(We,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Je extends b{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Je,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Ye extends b{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Ye,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class de extends b{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(de,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class le extends b{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(le,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class pe extends b{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(pe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class ye extends b{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(ye,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class ar extends b{constructor({cause:t}){super(`An error occurred while executing user operation: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class Ke extends b{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(Ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class Ze extends b{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(Ze,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class ir extends b{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:i,factoryData:o,initCode:s,maxFeePerGas:f,maxPriorityFeePerGas:c,nonce:d,paymaster:u,paymasterAndData:_,paymasterData:p,paymasterPostOpGasLimit:l,paymasterVerificationGasLimit:m,preVerificationGas:h,sender:g,signature:y,verificationGasLimit:x}){const E=kn({callData:n,callGasLimit:r,factory:i,factoryData:o,initCode:s,maxFeePerGas:typeof f<"u"&&`${mt(f)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${mt(c)} gwei`,nonce:d,paymaster:u,paymasterAndData:_,paymasterData:p,paymasterPostOpGasLimit:l,paymasterVerificationGasLimit:m,preVerificationGas:h,sender:g,signature:y,verificationGasLimit:x});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",E].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class sr extends b{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class or extends b{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class gt extends b{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const fr=[H,se,V,oe,fe,ue,ce,ye,de,le,pe];function ur(e,t){const n=(e.details||"").toLowerCase();if(Ge.message.test(n))return new Ge({cause:e});if(Ie.message.test(n))return new Ie({cause:e});if(Ae.message.test(n))return new Ae({cause:e});if(De.message.test(n))return new De({cause:e});if(Ue.message.test(n))return new Ue({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if($e.message.test(n))return new $e({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ce.message.test(n))return new Ce({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(Be.message.test(n))return new Be({cause:e});if(Le.message.test(n))return new Le({cause:e});if(Fe.message.test(n))return new Fe({cause:e,nonce:t.nonce});if(ke.message.test(n))return new ke({cause:e});if(je.message.test(n))return new je({cause:e});if(Te.message.test(n))return new Te({cause:e});if(V.message.test(n))return new V({cause:e});if(ze.message.test(n))return new ze({cause:e});if(Me.message.test(n))return new Me({cause:e});if(Ve.message.test(n))return new Ve({cause:e});if(He.message.test(n))return new He({cause:e});if(Re.message.test(n))return new Re({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Ne.message.test(n))return new Ne({cause:e});if(We.message.test(n))return new We({cause:e});if(Ye.message.test(n))return new Ye({cause:e});if(Je.message.test(n))return new Je({cause:e});if(Ke.message.test(n))return new Ke({cause:e});if(Ze.message.test(n))return new Ze({cause:e});const r=e.walk(a=>fr.some(i=>i.code===a.code));if(r){if(r.code===H.code)return new H({cause:e,data:r.data,message:r.details});if(r.code===se.code)return new se({cause:e});if(r.code===V.code)return new V({cause:e});if(r.code===oe.code)return new oe({cause:e});if(r.code===fe.code)return new fe({cause:e});if(r.code===ue.code)return new ue({cause:e});if(r.code===ce.code)return new ce({cause:e});if(r.code===ye.code)return new ye({cause:e});if(r.code===de.code)return new de({cause:e});if(r.code===le.code)return new le({cause:e});if(r.code===pe.code)return new pe({cause:e})}return new ar({cause:e})}function Ht(e,{calls:t,docsPath:n,...r}){const a=(()=>{const i=ur(e,r);if(t&&i instanceof H){const o=cr(i),s=t==null?void 0:t.filter(f=>f.abi);if(o&&s.length>0)return dr({calls:s,revertData:o})}return i})();return new ir(a,{docsPath:n,...r})}function cr(e){let t;return e.walk(n=>{var a,i,o,s;const r=n;if(typeof r.data=="string"||typeof((a=r.data)==null?void 0:a.revertData)=="string"||!(r instanceof b)&&typeof r.message=="string"){const f=(s=(o=((i=r.data)==null?void 0:i.revertData)||r.data||r.message).match)==null?void 0:s.call(o,/(0x[A-Za-z0-9]*)/);if(f)return t=f[1],!0}return!1}),t}function dr(e){const{calls:t,revertData:n}=e,{abi:r,functionName:a,args:i,to:o}=(()=>{const f=t==null?void 0:t.filter(d=>!!d.abi);if(f.length===1)return f[0];const c=f.filter(d=>{try{return!!Fn({abi:d.abi,data:n})}catch{return!1}});return c.length===1?c[0]:{abi:[],functionName:f.reduce((d,u)=>`${d?`${d} | `:""}${u.functionName}`,""),args:void 0,to:void 0}})(),s=n==="0x"?new jn({functionName:a}):new Tn({abi:r,data:n,functionName:a});return new zn(s,{abi:r,args:i,contractAddress:o,functionName:a})}function lr(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function ge(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=P(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=P(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=P(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=P(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=P(e.paymasterPostOpGasLimit)),typeof e.paymasterSignature<"u"&&(t.paymasterSignature=e.paymasterSignature),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=P(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=P(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=P(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=pr(e.authorization)),t}function pr(e){return{address:e.address,chainId:P(e.chainId),nonce:P(e.nonce),r:e.r?P(BigInt(e.r),{size:32}):D("0x",{size:32}),s:e.s?P(BigInt(e.s),{size:32}):D("0x",{size:32}),yParity:e.yParity?P(e.yParity,{size:1}):D("0x",{size:32})}}async function yr(e,t){const{chainId:n,entryPointAddress:r,context:a,...i}=t,o=ge(i),{paymasterPostOpGasLimit:s,paymasterVerificationGasLimit:f,...c}=await e.request({method:"pm_getPaymasterData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},r,P(n),a]});return{...c,...s&&{paymasterPostOpGasLimit:ie(s)},...f&&{paymasterVerificationGasLimit:ie(f)}}}async function mr(e,t){const{chainId:n,entryPointAddress:r,context:a,...i}=t,o=ge(i),{paymasterPostOpGasLimit:s,paymasterVerificationGasLimit:f,...c}=await e.request({method:"pm_getPaymasterStubData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},r,P(n),a]});return{...c,...s&&{paymasterPostOpGasLimit:ie(s)},...f&&{paymasterVerificationGasLimit:ie(f)}}}const _r=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function st(e,t){var Y,z;const n=t,{account:r=e.account,dataSuffix:a=typeof e.dataSuffix=="string"?e.dataSuffix:(Y=e.dataSuffix)==null?void 0:Y.value,parameters:i=_r,stateOverride:o}=n;if(!r)throw new _e;const s=K(r),f=e,c=n.paymaster??(f==null?void 0:f.paymaster),d=typeof c=="string"?c:void 0,{getPaymasterStubData:u,getPaymasterData:_}=(()=>{if(c===!0)return{getPaymasterStubData:v=>A(f,mr,"getPaymasterStubData")(v),getPaymasterData:v=>A(f,yr,"getPaymasterData")(v)};if(typeof c=="object"){const{getPaymasterStubData:v,getPaymasterData:w}=c;return{getPaymasterStubData:w&&v?v:w,getPaymasterData:w&&v?w:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),p=n.paymasterContext?n.paymasterContext:f==null?void 0:f.paymasterContext;let l={...n,paymaster:d,sender:s.address};const[m,h,g,y,x]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(v=>{const w=v;return w.abi?{data:Mn(w),to:w.to,value:w.value}:w})):n.callData)(),(async()=>{if(!i.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:v,factoryData:w}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:v&&w?R([v,w]):void 0}:{factory:v,factoryData:w}})(),(async()=>{var v;if(i.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return l;if((v=f==null?void 0:f.userOperation)!=null&&v.estimateFeesPerGas){const w=await f.userOperation.estimateFeesPerGas({account:s,bundlerClient:f,userOperation:l});return{...l,...w}}try{const w=f.client??e,$=await A(w,Vn,"estimateFeesPerGas")({chain:w.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*$.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*$.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(i.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(i.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await qn(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof m<"u"&&(l.callData=a?R([m,a]):m),typeof h<"u"&&(l={...l,...h}),typeof g<"u"&&(l={...l,...g}),typeof y<"u"&&(l.nonce=y),typeof x<"u"&&(l.authorization=x),i.includes("signature")&&(typeof n.signature<"u"?l.signature=n.signature:l.signature=await s.getStubSignature(l)),s.entryPoint.version==="0.6"&&!l.initCode&&(l.initCode="0x");let E;async function U(){return E||(e.chain?e.chain.id:(E=await A(e,rt,"getChainId")({}),E))}let L=!1;if(i.includes("paymaster")&&u&&!d&&!n.paymasterAndData){const{isFinal:v=!1,sponsor:w,...$}=await u({chainId:await U(),entryPointAddress:s.entryPoint.address,context:p,...l});L=v,l={...l,...$}}if(s.entryPoint.version==="0.6"&&!l.paymasterAndData&&(l.paymasterAndData="0x"),i.includes("gas")){if((z=s.userOperation)!=null&&z.estimateGas){const v=await s.userOperation.estimateGas(l);l={...l,...v}}if(typeof l.callGasLimit>"u"||typeof l.preVerificationGas>"u"||typeof l.verificationGasLimit>"u"||l.paymaster&&typeof l.paymasterPostOpGasLimit>"u"||l.paymaster&&typeof l.paymasterVerificationGasLimit>"u"){const v=await A(f,Nt,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:o,...l.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...l});l={...l,callGasLimit:l.callGasLimit??v.callGasLimit,preVerificationGas:l.preVerificationGas??v.preVerificationGas,verificationGasLimit:l.verificationGasLimit??v.verificationGasLimit,paymasterPostOpGasLimit:l.paymasterPostOpGasLimit??v.paymasterPostOpGasLimit,paymasterVerificationGasLimit:l.paymasterVerificationGasLimit??v.paymasterVerificationGasLimit}}}if(i.includes("paymaster")&&_&&!d&&!n.paymasterAndData&&!L){const v=await _({chainId:await U(),entryPointAddress:s.entryPoint.address,context:p,...l});l={...l,...v}}return delete l.calls,delete l.parameters,delete l.paymasterContext,typeof l.paymaster!="string"&&delete l.paymaster,l}async function Nt(e,t){var f;const{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new _e;const i=n?K(n):void 0,o=Rn(a),s=i?await A(e,st,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const c=[ge(s),r??((f=i==null?void 0:i.entryPoint)==null?void 0:f.address)],d=await e.request({method:"eth_estimateUserOperationGas",params:o?[...c,o]:[...c]});return lr(d)}catch(c){const d=t.calls;throw Ht(c,{...s,...d?{calls:d}:{}})}}function gr(e){return e.request({method:"eth_supportedEntryPoints"})}function br(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function hr(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new or({hash:t});const{blockHash:r,blockNumber:a,entryPoint:i,transactionHash:o,userOperation:s}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:i,transactionHash:o,userOperation:br(s)}}function vr(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>Hn(n))),e.receipt&&(t.receipt=Nn(t.receipt)),t}async function Wt(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new sr({hash:t});return vr(n)}async function wr(e,t){var f,c;const{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new _e;const a=n?K(n):void 0,i=a?await A(e,st,"prepareUserOperation")(t):t,o=t.signature||await((f=a==null?void 0:a.signUserOperation)==null?void 0:f.call(a,i)),s=ge({...i,signature:o});try{return await e.request({method:"eth_sendUserOperation",params:[s,r??((c=a==null?void 0:a.entryPoint)==null?void 0:c.address)]},{retryCount:0})}catch(d){const u=t.calls;throw Ht(d,{...i,...u?{calls:u}:{},signature:o})}}function xr(e,t){const{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:i=12e4}=t;let o=0;const s=Tt(["waitForUserOperationReceipt",e.uid,n]);return new Promise((f,c)=>{const d=zt(s,{resolve:f,reject:c},u=>{const _=m=>{l(),m(),d()},p=i?setTimeout(()=>_(()=>u.reject(new gt({hash:n}))),i):void 0,l=Mt(async()=>{a&&o>=a&&(clearTimeout(p),_(()=>u.reject(new gt({hash:n}))));try{const m=await A(e,Wt,"getUserOperationReceipt")({hash:n});clearTimeout(p),_(()=>u.resolve(m))}catch(m){const h=m;h.name!=="UserOperationReceiptNotFoundError"&&(clearTimeout(p),_(()=>u.reject(h)))}o++},{emitOnBegin:!0,interval:r});return l})})}function Pr(e){return{estimateUserOperationGas:t=>Nt(e,t),getChainId:()=>rt(e),getSupportedEntryPoints:()=>gr(e),getUserOperation:t=>hr(e,t),getUserOperationReceipt:t=>Wt(e,t),prepareUserOperation:t=>st(e,t),sendUserOperation:t=>wr(e,t),waitForUserOperationReceipt:t=>xr(e,t)}}function Ua(e){const{client:t,dataSuffix:n,key:r="bundler",name:a="Bundler Client",paymaster:i,paymasterContext:o,transport:s,userOperation:f}=e;return Object.assign(Wn({...e,chain:e.chain??(t==null?void 0:t.chain),key:r,name:a,transport:s,type:"bundlerClient"}),{client:t,dataSuffix:n??(t==null?void 0:t.dataSuffix),paymaster:i,paymasterContext:o,userOperation:f}).extend(Pr)}function Or(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;const o=f=>f===null?null:JSON.parse(f,void 0),s=(i=n.getItem(a))!=null?i:null;return s instanceof Promise?s.then(o):o(s)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>n.removeItem(a)}}const Xe=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Xe(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Xe(r)(n)}}}},Sr=(e,t)=>(n,r,a)=>{let i={storage:Or(()=>localStorage),partialize:m=>m,version:0,merge:(m,h)=>({...h,...m}),...t},o=!1;const s=new Set,f=new Set;let c=i.storage;if(!c)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,a);const d=()=>{const m=i.partialize({...r()});return c.setItem(i.name,{state:m,version:i.version})},u=a.setState;a.setState=(m,h)=>{u(m,h),d()};const _=e((...m)=>{n(...m),d()},r,a);a.getInitialState=()=>_;let p;const l=()=>{var m,h;if(!c)return;o=!1,s.forEach(y=>{var x;return y((x=r())!=null?x:_)});const g=((h=i.onRehydrateStorage)==null?void 0:h.call(i,(m=r())!=null?m:_))||void 0;return Xe(c.getItem.bind(c))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const x=i.migrate(y.state,y.version);return x instanceof Promise?x.then(E=>[!0,E]):[!0,x]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var x;const[E,U]=y;if(p=i.merge(U,(x=r())!=null?x:_),n(p,!0),E)return d()}).then(()=>{g==null||g(p,void 0),p=r(),o=!0,f.forEach(y=>y(p))}).catch(y=>{g==null||g(void 0,y)})};return a.persist={setOptions:m=>{i={...i,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>l(),hasHydrated:()=>o,onHydrate:m=>(s.add(m),()=>{s.delete(m)}),onFinishHydration:m=>(f.add(m),()=>{f.delete(m)})},i.skipHydration||l(),p||_},$a=Sr,bt=e=>{let t;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const _=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(p=>p(t,_))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c))},f=t=e(r,a,s);return s},Ca=e=>e?bt(e):bt;var be,O,Jt,M,ht,Yt,Qe,ot,qe,et,Z={},Kt=[],Er=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ft=Array.isArray;function F(e,t){for(var n in t)e[n]=t[n];return e}function Zt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Gr(e,t,n){var r,a,i,o={};for(i in t)i=="key"?r=t[i]:i=="ref"?a=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?be.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return ne(e,o,r,a,null)}function ne(e,t,n,r,a){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++Jt,__i:-1,__u:0};return a==null&&O.vnode!=null&&O.vnode(i),i}function he(e){return e.children}function re(e,t){this.props=e,this.context=t}function N(e,t){if(t==null)return e.__?N(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?N(e):null}function Xt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Xt(e)}}function vt(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!me.__r++||ht!==O.debounceRendering)&&((ht=O.debounceRendering)||Yt)(me)}function me(){var e,t,n,r,a,i,o,s;for(M.sort(Qe);e=M.shift();)e.__d&&(t=M.length,r=void 0,i=(a=(n=e).__v).__e,o=[],s=[],n.__P&&((r=F({},a)).__v=a.__v+1,O.vnode&&O.vnode(r),ut(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[i]:null,o,i??N(a),!!(32&a.__u),s),r.__v=a.__v,r.__.__k[r.__i]=r,en(o,r,s),r.__e!=i&&Xt(r)),M.length>t&&M.sort(Qe));me.__r=0}function Qt(e,t,n,r,a,i,o,s,f,c,d){var u,_,p,l,m,h=r&&r.__k||Kt,g=t.length;for(n.__d=f,Ir(n,t,h),f=n.__d,u=0;u<g;u++)(p=n.__k[u])!=null&&(_=p.__i===-1?Z:h[p.__i]||Z,p.__i=u,ut(e,p,_,a,i,o,s,f,c,d),l=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&ct(_.ref,null,p),d.push(p.ref,p.__c||l,p)),m==null&&l!=null&&(m=l),65536&p.__u||_.__k===p.__k?f=qt(p,f,e):typeof p.type=="function"&&p.__d!==void 0?f=p.__d:l&&(f=l.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=f,n.__e=m}function Ir(e,t,n){var r,a,i,o,s,f=t.length,c=n.length,d=c,u=0;for(e.__k=[],r=0;r<f;r++)(a=t[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(o=r+u,(a=e.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ne(null,a,null,null,null):ft(a)?ne(he,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?ne(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,i=null,(s=a.__i=Ar(a,n,o,d))!==-1&&(d--,(i=n[s])&&(i.__u|=131072)),i==null||i.__v===null?(s==-1&&u--,typeof a.type!="function"&&(a.__u|=65536)):s!==o&&(s==o-1?u--:s==o+1?u++:(s>o?u--:u++,a.__u|=65536))):a=e.__k[r]=null;if(d)for(r=0;r<c;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=N(i)),tn(i,i))}function qt(e,t,n){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=qt(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=N(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Ar(e,t,n,r){var a=e.key,i=e.type,o=n-1,s=n+1,f=t[n];if(f===null||f&&a==f.key&&i===f.type&&(131072&f.__u)==0)return n;if(r>(f!=null&&(131072&f.__u)==0?1:0))for(;o>=0||s<t.length;){if(o>=0){if((f=t[o])&&(131072&f.__u)==0&&a==f.key&&i===f.type)return o;o--}if(s<t.length){if((f=t[s])&&(131072&f.__u)==0&&a==f.key&&i===f.type)return s;s++}}return-1}function wt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Er.test(t)?n:n+"px"}function Q(e,t,n,r,a){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||wt(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||wt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=ot,e.addEventListener(t,i?et:qe,i)):e.removeEventListener(t,i?et:qe,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function xt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ot++;else if(t.t<n.u)return;return n(O.event?O.event(t):t)}}}function ut(e,t,n,r,a,i,o,s,f,c){var d,u,_,p,l,m,h,g,y,x,E,U,L,Y,z,v,w=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(f=!!(32&n.__u),i=[s=t.__e=n.__e]),(d=O.__b)&&d(t);e:if(typeof w=="function")try{if(g=t.props,y="prototype"in w&&w.prototype.render,x=(d=w.contextType)&&r[d.__c],E=d?x?x.props.value:d.__:r,n.__c?h=(u=t.__c=n.__c).__=u.__E:(y?t.__c=u=new w(g,E):(t.__c=u=new re(g,E),u.constructor=w,u.render=Ur),x&&x.sub(u),u.props=g,u.state||(u.state={}),u.context=E,u.__n=r,_=u.__d=!0,u.__h=[],u._sb=[]),y&&u.__s==null&&(u.__s=u.state),y&&w.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=F({},u.__s)),F(u.__s,w.getDerivedStateFromProps(g,u.__s))),p=u.props,l=u.state,u.__v=t,_)y&&w.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),y&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(y&&w.getDerivedStateFromProps==null&&g!==p&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,E),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,E)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),U=0;U<u._sb.length;U++)u.__h.push(u._sb[U]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,E),y&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(p,l,m)})}if(u.context=E,u.props=g,u.__P=e,u.__e=!1,L=O.__r,Y=0,y){for(u.state=u.__s,u.__d=!1,L&&L(t),d=u.render(u.props,u.state,u.context),z=0;z<u._sb.length;z++)u.__h.push(u._sb[z]);u._sb=[]}else do u.__d=!1,L&&L(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++Y<25);u.state=u.__s,u.getChildContext!=null&&(r=F(F({},r),u.getChildContext())),y&&!_&&u.getSnapshotBeforeUpdate!=null&&(m=u.getSnapshotBeforeUpdate(p,l)),Qt(e,ft(v=d!=null&&d.type===he&&d.key==null?d.props.children:d)?v:[v],t,n,r,a,i,o,s,f,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),h&&(u.__E=u.__=null)}catch($){if(t.__v=null,f||i!=null){for(t.__u|=f?160:32;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;O.__e($,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Dr(n.__e,t,n,r,a,i,o,f,c);(d=O.diffed)&&d(t)}function en(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)ct(n[r],n[++r],n[++r]);O.__c&&O.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){O.__e(i,a.__v)}})}function Dr(e,t,n,r,a,i,o,s,f){var c,d,u,_,p,l,m,h=n.props,g=t.props,y=t.type;if(y==="svg"?a="http://www.w3.org/2000/svg":y==="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((p=i[c])&&"setAttribute"in p==!!y&&(y?p.localName===y:p.nodeType===3)){e=p,i[c]=null;break}}if(e==null){if(y===null)return document.createTextNode(g);e=document.createElementNS(a,y,g.is&&g),s&&(O.__m&&O.__m(t,i),s=!1),i=null}if(y===null)h===g||s&&e.data===g||(e.data=g);else{if(i=i&&be.call(e.childNodes),h=n.props||Z,!s&&i!=null)for(h={},c=0;c<e.attributes.length;c++)h[(p=e.attributes[c]).name]=p.value;for(c in h)if(p=h[c],c!="children"){if(c=="dangerouslySetInnerHTML")u=p;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;Q(e,c,null,p,a)}}for(c in g)p=g[c],c=="children"?_=p:c=="dangerouslySetInnerHTML"?d=p:c=="value"?l=p:c=="checked"?m=p:s&&typeof p!="function"||h[c]===p||Q(e,c,p,h[c],a);if(d)s||u&&(d.__html===u.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),Qt(e,ft(_)?_:[_],t,n,r,y==="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,o,i?i[0]:n.__k&&N(n,0),s,f),i!=null)for(c=i.length;c--;)Zt(i[c]);s||(c="value",y==="progress"&&l==null?e.removeAttribute("value"):l!==void 0&&(l!==e[c]||y==="progress"&&!l||y==="option"&&l!==h[c])&&Q(e,c,l,h[c],a),c="checked",m!==void 0&&m!==e[c]&&Q(e,c,m,h[c],a))}return e}function ct(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(a){O.__e(a,n)}}function tn(e,t,n){var r,a;if(O.unmount&&O.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ct(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){O.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&tn(r[a],t,n||typeof e.type!="function");n||Zt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ur(e,t,n){return this.constructor(e,n)}function Ba(e,t,n){var r,a,i,o;O.__&&O.__(e,t),a=(r=!1)?null:t.__k,i=[],o=[],ut(t,e=t.__k=Gr(he,null,[e]),a||Z,Z,t.namespaceURI,a?null:t.firstChild?be.call(t.childNodes):null,i,a?a.__e:t.firstChild,r,o),en(i,e,o)}be=Kt.slice,O={__e:function(e,t,n,r){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),o=a.__d),o)return a.__E=a}catch(s){e=s}throw e}},Jt=0,re.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},n),this.props)),e&&F(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),vt(this))},re.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),vt(this))},re.prototype.render=he,M=[],Yt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qe=function(e,t){return e.__v.__b-t.__v.__b},me.__r=0,ot=0,qe=xt(!1),et=xt(!0);var X,G,Oe,Pt,tt=0,nn=[],I=O,Ot=I.__b,St=I.__r,Et=I.diffed,Gt=I.__c,It=I.unmount,At=I.__;function dt(e,t){I.__h&&I.__h(G,e,tt||t),tt=0;var n=G.__H||(G.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function La(e){return tt=1,$r(an,e)}function $r(e,t,n){var r=dt(X++,2);if(r.t=e,!r.__c&&(r.__=[an(void 0,t),function(s){var f=r.__N?r.__N[0]:r.__[0],c=r.t(f,s);f!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=G,!G.u)){var a=function(s,f,c){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(_){return!!_.__c});if(d.every(function(_){return!_.__N}))return!i||i.call(this,s,f,c);var u=!1;return d.forEach(function(_){if(_.__N){var p=_.__[0];_.__=_.__N,_.__N=void 0,p!==_.__[0]&&(u=!0)}}),!(!u&&r.__c.props===s)&&(!i||i.call(this,s,f,c))};G.u=!0;var i=G.shouldComponentUpdate,o=G.componentWillUpdate;G.componentWillUpdate=function(s,f,c){if(this.__e){var d=i;i=void 0,a(s,f,c),i=d}o&&o.call(this,s,f,c)},G.shouldComponentUpdate=a}return r.__N||r.__}function ka(e,t){var n=dt(X++,3);!I.__s&&rn(n.__H,t)&&(n.__=e,n.i=t,G.__H.__h.push(n))}function Fa(e,t){var n=dt(X++,7);return rn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Cr(){for(var e;e=nn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(nt),e.__H.__h=[]}catch(t){e.__H.__h=[],I.__e(t,e.__v)}}I.__b=function(e){G=null,Ot&&Ot(e)},I.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),At&&At(e,t)},I.__r=function(e){St&&St(e),X=0;var t=(G=e.__c).__H;t&&(Oe===G?(t.__h=[],G.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(ae),t.__h.forEach(nt),t.__h=[],X=0)),Oe=G},I.diffed=function(e){Et&&Et(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(nn.push(t)!==1&&Pt===I.requestAnimationFrame||((Pt=I.requestAnimationFrame)||Br)(Cr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Oe=G=null},I.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ae),n.__h=n.__h.filter(function(r){return!r.__||nt(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],I.__e(r,n.__v)}}),Gt&&Gt(e,t)},I.unmount=function(e){It&&It(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ae(r)}catch(a){t=a}}),n.__H=void 0,t&&I.__e(t,n.__v))};var Dt=typeof requestAnimationFrame=="function";function Br(e){var t,n=function(){clearTimeout(r),Dt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Dt&&(t=requestAnimationFrame(n))}function ae(e){var t=G,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),G=t}function nt(e){var t=G;e.__c=e.__(),G=t}function rn(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function an(e,t){return typeof t=="function"?t(e):t}const Lr="0.1.1";function kr(){return Lr}class S extends Error{constructor(t,n={}){const r=(()=>{var f;if(n.cause instanceof S){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return(f=n.cause)!=null&&f.message?n.cause.message:n.details})(),a=n.cause instanceof S&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${a??""}`,s=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${o}`:void 0]:[]].filter(f=>typeof f=="string").join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${kr()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=a,this.shortMessage=t}walk(t){return sn(this,t)}}function sn(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?sn(e.cause,t):t?null:e}const Fr="#__bigint";function ve(e,t,n){return JSON.stringify(e,(r,a)=>typeof a=="bigint"?a.toString()+Fr:a,n)}function jr(e,t){if(J(e)>t)throw new ea({givenSize:J(e),maxSize:t})}function Tr(e,t){if(typeof t=="number"&&t>0&&t>J(e)-1)throw new mn({offset:t,position:"start",size:J(e)})}function zr(e,t,n){if(typeof t=="number"&&typeof n=="number"&&J(e)!==n-t)throw new mn({offset:n,position:"end",size:J(e)})}const C={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ut(e){if(e>=C.zero&&e<=C.nine)return e-C.zero;if(e>=C.A&&e<=C.F)return e-(C.A-10);if(e>=C.a&&e<=C.f)return e-(C.a-10)}function lt(e,t){if(T(e)>t)throw new Zr({givenSize:T(e),maxSize:t})}function Mr(e,t){if(typeof t=="number"&&t>0&&t>T(e)-1)throw new dn({offset:t,position:"start",size:T(e)})}function Vr(e,t,n){if(typeof t=="number"&&typeof n=="number"&&T(e)!==n-t)throw new dn({offset:n,position:"end",size:T(e)})}function on(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const a=e.replace("0x","");if(a.length>r*2)throw new Xr({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Rr=new TextEncoder,Hr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nr(e,t={}){const{strict:n=!1}=t;if(!e)throw new $t(e);if(typeof e!="string")throw new $t(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Ct(e);if(!e.startsWith("0x"))throw new Ct(e)}function we(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function fn(e){return e instanceof Uint8Array?W(e):Array.isArray(e)?W(new Uint8Array(e)):e}function W(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=Hr[e[a]];const r=`0x${n}`;return typeof t.size=="number"?(lt(r,t.size),cn(r,t.size)):r}function j(e,t={}){const{signed:n,size:r}=t,a=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<o){const c=typeof e=="bigint"?"n":"";throw new Kr({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${e}${c}`})}const f=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Wr(f,r):f}function un(e,t={}){return W(Rr.encode(e),t)}function Wr(e,t){return on(e,{dir:"left",size:t})}function cn(e,t){return on(e,{dir:"right",size:t})}function B(e,t,n,r={}){const{strict:a}=r;Mr(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Vr(i,t,n),i}function T(e){return Math.ceil((e.length-2)/2)}function Jr(e,t={}){const{signed:n}=t;t.size&&lt(e,t.size);const r=BigInt(e);if(!n)return r;const a=(e.length-2)/2,i=(1n<<BigInt(a)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function Yr(e,t={}){const{strict:n=!1}=t;try{return Nr(e,{strict:n}),!0}catch{return!1}}class Kr extends S{constructor({max:t,min:n,signed:r,size:a,value:i}){super(`Number \`${i}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class $t extends S{constructor(t){super(`Value \`${typeof t=="object"?ve(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Ct extends S{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Zr=class extends S{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},dn=class extends S{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class Xr extends S{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Qr(e){if(!(e instanceof Uint8Array)){if(!e)throw new q(e);if(typeof e!="object")throw new q(e);if(!("BYTES_PER_ELEMENT"in e))throw new q(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new q(e)}}function ln(e){return e instanceof Uint8Array?e:typeof e=="string"?yn(e):pn(e)}function pn(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function yn(e,t={}){const{size:n}=t;let r=e;n&&(lt(e,n),r=cn(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);const i=a.length/2,o=new Uint8Array(i);for(let s=0,f=0;s<i;s++){const c=Ut(a.charCodeAt(f++)),d=Ut(a.charCodeAt(f++));if(c===void 0||d===void 0)throw new S(`Invalid byte sequence ("${a[f-2]}${a[f-1]}" in "${a}").`);o[s]=c*16+d}return o}function J(e){return e.length}function Bt(e,t,n,r={}){const{strict:a}=r;Tr(e,t);const i=e.slice(t,n);return a&&zr(i,t,n),i}function Lt(e,t={}){const{size:n}=t;typeof n<"u"&&jr(e,n);const r=W(e,t);return Jr(r,t)}function qr(e){try{return Qr(e),!0}catch{return!1}}class q extends S{constructor(t){super(`Value \`${typeof t=="object"?ve(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class ea extends S{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class mn extends S{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function _n(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Jn(ln(e));return n==="Bytes"?r:W(r)}function gn(e,t={}){const{compressed:n}=t,{prefix:r,x:a,y:i}=e;if(n===!1||typeof a=="bigint"&&typeof i=="bigint"){if(r!==4)throw new kt({prefix:r,cause:new ia});return}if(n===!0||typeof a=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new kt({prefix:r,cause:new aa});return}throw new ra({publicKey:e})}function ta(e){const t=(()=>{if(Yr(e))return bn(e);if(qr(e))return na(e);const{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return gn(t),t}function na(e){return bn(W(e))}function bn(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new sa({publicKey:e});if(e.length===130){const r=BigInt(B(e,0,32)),a=BigInt(B(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){const r=Number(B(e,0,1)),a=BigInt(B(e,1,33)),i=BigInt(B(e,33,65));return{prefix:r,x:a,y:i}}const t=Number(B(e,0,1)),n=BigInt(B(e,1,33));return{prefix:t,x:n}}function za(e,t={}){gn(e);const{prefix:n,x:r,y:a}=e,{includePrefix:i=!0}=t;return we(i?j(n,{size:1}):"0x",j(r,{size:32}),typeof a=="bigint"?j(a,{size:32}):"0x")}class ra extends S{constructor({publicKey:t}){super(`Value \`${ve(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class kt extends S{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class aa extends S{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class ia extends S{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let sa=class extends S{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${T(fn(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const Ft=2n**256n-1n;function oa(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new Se({signature:e});if(typeof e.s>"u")throw new Se({signature:e});if(n&&typeof e.yParity>"u")throw new Se({signature:e});if(e.r<0n||e.r>Ft)throw new da({value:e.r});if(e.s<0n||e.s>Ft)throw new la({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new pt({value:e.yParity})}function Va(e){if(e.length!==130&&e.length!==132)throw new ca({signature:e});const t=BigInt(B(e,0,32)),n=BigInt(B(e,32,64)),r=(()=>{const a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return fa(a)}catch{throw new pt({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Ra(e){oa(e);const t=e.r,n=e.s;return we(j(t,{size:32}),j(n,{size:32}),typeof e.yParity=="number"?j(ua(e.yParity),{size:1}):"0x")}function fa(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new pa({value:e})}function ua(e){if(e===0)return 27;if(e===1)return 28;throw new pt({value:e})}class ca extends S{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${T(fn(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Se extends S{constructor({signature:t}){super(`Signature \`${ve(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class da extends S{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class la extends S{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class pt extends S{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class pa extends S{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const ya=new TextDecoder,ee=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))});function ma(e,t={}){const{pad:n=!0,url:r=!1}=t,a=new Uint8Array(Math.ceil(e.length/3)*4);for(let f=0,c=0;c<e.length;f+=4,c+=3){const d=(e[c]<<16)+(e[c+1]<<8)+(e[c+2]|0);a[f]=ee[d>>18],a[f+1]=ee[d>>12&63],a[f+2]=ee[d>>6&63],a[f+3]=ee[d&63]}const i=e.length%3,o=Math.floor(e.length/3)*4+(i&&i+1);let s=ya.decode(new Uint8Array(a.buffer,0,o));return n&&i===1&&(s+="=="),n&&i===2&&(s+="="),r&&(s=s.replaceAll("+","-").replaceAll("/","_")),s}function _a(e,t={}){return ma(yn(e),t)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hn={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},vn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},wn={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},ga=it(hn.p),ba=it(vn.p),ha=it(wn.p),va=at({...hn,Fp:ga,lowS:!1},Yn);at({...vn,Fp:ba,lowS:!1},Kn);at({...wn,Fp:ha,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Zn);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jt=va;Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function wa(e={}){const{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,a=_n(un(n)),i=j(t,{size:1}),o=j(r,{size:4});return we(a,i,o)}function xa(e){const{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:a=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:_a(t,{url:!0,pad:!1}),origin:a,crossOrigin:n,...r})}function Ha(e){const{challenge:t,crossOrigin:n,extraClientData:r,flag:a,origin:i,rpId:o,signCount:s,userVerification:f="required"}=e,c=wa({flag:a,rpId:o,signCount:s}),d=xa({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),u=_n(un(d)),_=d.indexOf('"challenge"'),p=d.indexOf('"type"'),l={authenticatorData:c,clientDataJSON:d,challengeIndex:_,typeIndex:p,userVerificationRequired:f==="required"},m=we(c,u);return{metadata:l,payload:m}}async function Na(e={}){const{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),a=ta(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:a}}async function Wa(e){const{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,ln(t)),a=pn(new Uint8Array(r)),i=Lt(Bt(a,0,32));let o=Lt(Bt(a,32,64));return o>jt.CURVE.n/2n&&(o=jt.CURVE.n-o),{r:i,s:o}}function xe(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Pa(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=xe(n);return(a,i)=>r.then(o=>i(o.transaction(t,a).objectStore(t)))}let Ee;function yt(){return Ee||(Ee=Pa("keyval-store","keyval")),Ee}function Ja(e,t=yt()){return t("readonly",n=>xe(n.get(e)))}function Ya(e,t,n=yt()){return n("readwrite",r=>(r.put(t,e),xe(r.transaction)))}function Ka(e,t=yt()){return t("readwrite",n=>(n.delete(e),xe(n.transaction)))}export{Ba as B,Fa as T,Gr as _,Or as a,Ua as b,Ca as c,Pa as d,Ka as e,B as f,Ja as g,La as h,Ha as i,Wa as j,Ra as k,Na as l,Va as m,Da as n,Ia as o,$a as p,Ga as q,Aa as r,Ya as s,za as t,Ea as u,O as v,Sa as w,ka as y};
